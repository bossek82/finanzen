<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rentenlücke</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Rentenlücke 3</h1>
    <!-- Kurze Info worum es geht -->
    <p>Berechnen Sie Ihre Rentenlücke basierend auf Ihren aktuellen Einnahmen, Ausgaben und weiteren Parametern.</p>

    <!-- Eingabefelder -->
    <form id="rentenluecke-form">
        <fieldset>
            <legend>Einnahmen</legend>

            <label for="nettoeinkommen">Nettoeinkommen aktuell (€):</label>
            <input type="number" id="nettoeinkommen" name="nettoeinkommen" value="5000" required><br>

            <label for="gehaltswachstum">Gehaltswachstum (% pro Jahr):</label>
            <input type="number" id="gehaltswachstum" name="gehaltswachstum" value="1.5" step="0.1" required><br>

            <label for="entfallende-ausgaben">Aktuelle Ausgaben, die in der Rente entfallen (€):</label>
            <input type="number" id="entfallende-ausgaben" name="entfallende-ausgaben" value="1200" required><br>
        </fieldset>

        <fieldset>
            <legend>Vermögen</legend>

            <label for="sparruecklage">Monatliche Sparrücklage (€):</label>
            <input type="number" id="sparruecklage" name="sparruecklage" value="1000" required><br>

            <label for="kapital">Vorhandenes Kapital (€):</label>
            <input type="number" id="kapital" name="kapital" value="10000" required><br>

            <label for="zinssatz">Jährlicher Zinssatz Sparvermögen (%):</label>
            <input type="number" id="zinssatz" name="zinssatz" value="6" step="0.1" required><br>
        </fieldset>

        <fieldset>
            <legend>Rente</legend>

            <label for="jahre-bis-rente">Jahre bis zur Rente:</label>
            <input type="number" id="jahre-bis-rente" name="jahre-bis-rente" value="24" required><br>

            <label for="geschaetzte-rente">Geschätzte Rente (€):</label>
            <input type="number" id="geschaetzte-rente" name="geschaetzte-rente" value="2200" required><br>

            <label for="jahre-ab-rente">Jahre ab Rente bis zum Tod:</label>
            <input type="number" id="jahre-ab-rente" name="jahre-ab-rente" value="20" required><br>
        </fieldset>

        <label for="inflation">Inflation (% pro Jahr):</label>
        <input type="number" id="inflation" name="inflation" value="2" step="0.1" required><br>

        <button type="button" id="berechnen-button">Berechnen</button>
    </form>

    <!-- Bereich für berechneten Bedarf bis Rente-->
    <div id="berechnete-werte-bis-rente">
        <h2>Berechneter monatlicher Bedarf bis Renteneintritt</h2>
        <canvas id="nettoeinkommen-graph" width="400" height="200"></canvas>
        <div id="berechnete-ergebnisse">
            <p id="nettoeinkommen-am-anfang"></p>
            <p id="nettoeinkommen-bei-rente"></p>
            <p id="lebensstandard-am-anfang"></p>
            <p id="lebensstandard-bei-rente"></p>
        </div>
        <script>
            document.getElementById('berechnen-button').addEventListener('click', function () {
                const nettoeinkommen = parseFloat(document.getElementById('nettoeinkommen').value);
                const gehaltswachstum = parseFloat(document.getElementById('gehaltswachstum').value) / 100;
                const jahreBisRente = parseInt(document.getElementById('jahre-bis-rente').value);
                const entfallendeAusgaben = parseFloat(document.getElementById('entfallende-ausgaben').value);
                const sparruecklage = parseFloat(document.getElementById('sparruecklage').value);

                const nettoeinkommenJahre = [];
                const lebensstandardJahre = [];
                const sparruecklageJahre = [];
                const entfallendeAusgabenJahre = [];
                let aktuellesEinkommen = nettoeinkommen;

                for (let jahr = 0; jahr <= jahreBisRente; jahr++) {
                    nettoeinkommenJahre.push({ jahr, einkommen: aktuellesEinkommen });
                    const lebensstandard = aktuellesEinkommen - entfallendeAusgaben - sparruecklage;
                    lebensstandardJahre.push({ jahr, lebensstandard });
                    sparruecklageJahre.push({ jahr, sparruecklage });
                    entfallendeAusgabenJahre.push({ jahr, entfallendeAusgaben });
                    aktuellesEinkommen += aktuellesEinkommen * gehaltswachstum;
                }

                // Wert des Nettoeinkommens am Anfang
                const nettoeinkommenAmAnfang = nettoeinkommenJahre[0].einkommen;
                document.getElementById('nettoeinkommen-am-anfang').textContent = `Nettoeinkommen am Anfang (entsprechend Eingabewert): ${nettoeinkommenAmAnfang.toFixed(2)} €`;

                // Wert des Nettoeinkommens bei Renteneintritt
                const nettoeinkommenBeiRente = nettoeinkommenJahre[jahreBisRente].einkommen;
                document.getElementById('nettoeinkommen-bei-rente').textContent = `Nettoeinkommen bei Renteneintritt: ${nettoeinkommenBeiRente.toFixed(2)} € (ausgehend von aktuellem Nettoeinkommen: ${nettoeinkommen.toFixed(2)} €, Gehaltswachstum: ${(gehaltswachstum * 100).toFixed(1)} % pro Jahr, über ${jahreBisRente} Jahre)`;

                // Wert des Lebensstandards am Anfang
                const lebensstandardAmAnfang = lebensstandardJahre[0].lebensstandard;
                document.getElementById('lebensstandard-am-anfang').textContent = `Lebensstandard am Anfang: ${lebensstandardAmAnfang.toFixed(2)} € (= Nettoeinkommen: ${nettoeinkommen.toFixed(2)} € - Entfallende Ausgaben: ${entfallendeAusgaben.toFixed(2)} € - Sparrücklage: ${sparruecklage.toFixed(2)} €)`;

                // Wert des Lebensstandards bei Renteneintritt
                const lebensstandardBeiRente = nettoeinkommenBeiRente - entfallendeAusgaben - sparruecklage;
                document.getElementById('lebensstandard-bei-rente').textContent = `Lebensstandard bei Renteneintritt: ${lebensstandardBeiRente.toFixed(2)} € (= Nettoeinkommen bei Renteneintritt: ${nettoeinkommenBeiRente.toFixed(2)} € - Entfallende Ausgaben: ${entfallendeAusgaben.toFixed(2)} € - Sparrücklage: ${sparruecklage.toFixed(2)} €)`;

                const ctx = document.getElementById('nettoeinkommen-graph').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: nettoeinkommenJahre.map(item => `Jahr ${item.jahr}`),
                        datasets: [
                            {
                                label: 'Nettoeinkommen (€)',
                                data: nettoeinkommenJahre.map(item => item.einkommen.toFixed(2)),
                                borderColor: 'blue',
                                borderWidth: 2,
                                fill: false
                            },
                            {
                                label: 'Lebensstandard (€)',
                                data: lebensstandardJahre.map(item => item.lebensstandard.toFixed(2)),
                                borderColor: 'green',
                                borderWidth: 2,
                                fill: false
                            },
                            {
                                label: 'Sparrücklage (€)',
                                data: sparruecklageJahre.map(item => item.sparruecklage.toFixed(2)),
                                borderColor: 'orange',
                                borderWidth: 2,
                                fill: false
                            },
                            {
                                label: 'Entfallende Ausgaben (€)',
                                data: entfallendeAusgabenJahre.map(item => item.entfallendeAusgaben.toFixed(2)),
                                borderColor: 'red',
                                borderWidth: 2,
                                fill: false
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Jahre bis Rente'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Betrag (€)'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                });
            });
        </script>
    </div>

        <!-- Bis Rente:
         Monatlicher Bedarf berechnen bis zeitpunkt Rente
         Sparvermögen berechnen bis Rente
          -->


        <!-- Ab Rente:
        Inflation auf verbrauch aufrechnen
        Rentenentwicklung berechnen 
        Monatliche Rente abziehen
        ...ohne Sparentnahme
        Delta durch Sparentnahme schließen
        Wertentwicklung vermögen
          -->

    <div id="graphen-bis-rente">
        <h2>Berechneter Vermögensaufbau bis Renteneintritt</h2>
        <canvas id="vermoegensaufbau-graph" width="400" height="200"></canvas>
        <div id="vermoegensaufbau-ergebnisse">
            <p id="vermoegen-am-anfang"></p>
            <p id="vermoegen-bei-rente"></p>
            <p id="netto-gespart"></p>
            <p id="zinsvermoegen"></p>
        </div>
        <!-- Removed script block as it is redundant -->
    </div>

    <div id="berechnete-werte-waehrend-rente">
        <h2>Berechnete Werte während der Rente</h2>
        <!-- Hier werden die Ergebnisse während der Rente angezeigt -->
    </div>

    <div id="graphen-waehrend-rente">
        <h2>Graphen während der Rente</h2>
        <!-- Hier werden die Graphen für die Zeit während der Rente angezeigt -->
    </div>

    <div id="graphen">
        <!-- Hier werden die Graphen angezeigt -->
    </div>

    <a href="index.html">Zurück zur Übersicht</a>
</body>
</html>
